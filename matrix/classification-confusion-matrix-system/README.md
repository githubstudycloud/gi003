# 🎯 分类预测混淆矩阵统计报表系统

## 📚 项目概述

这是一个用于评估**分类模型预测效果**的可视化报表系统,通过**混淆矩阵(Confusion Matrix)**展示模型在各类别上的表现,并支持多维度筛选和Excel导出功能。

### 核心功能
- ✅ 生成16x16混淆矩阵(支持0-15类别)
- ✅ 计算召回率(Recall)和精准率(Precision)
- ✅ 多维度筛选:用例/场景/垂类/因子/因子值
- ✅ 单元格详情查看
- ✅ Excel报表导出
- ✅ 可视化颜色编码(绿色=正确,橙色=错误)

---

## 🗂️ 项目结构

```
classification-confusion-matrix-system/
├── docs/                           # 📖 设计文档
│   ├── 01-需求分析与系统概述.md      # 业务需求和概念解释
│   ├── 02-数据库设计.md             # 数据库表结构和SQL
│   ├── 03-后端设计.md               # Spring Boot后端设计
│   ├── 04-前端设计.md               # Vue 3前端设计
│   └── 05-完整架构图.md             # Mermaid架构图和流程图
│
├── frontend/                       # 🖥️ 前端项目
│   └── confusion-matrix-demo.html  # HTML原型演示
│
└── backend/                        # ⚙️ 后端项目(待创建)
```

---

## 📖 文档导航

### 1️⃣ [需求分析与系统概述](docs/01-需求分析与系统概述.md)
- 什么是混淆矩阵?
- 召回率和精准率的概念
- 系统功能需求
- 技术架构选型

### 2️⃣ [数据库设计](docs/02-数据库设计.md)
- ER关系图
- 6张核心表结构(SQL)
- 混淆矩阵查询SQL
- 索引优化策略
- 测试数据生成脚本

### 3️⃣ [后端设计](docs/03-后端设计.md)
- Spring Boot项目结构
- Controller/Service/Mapper分层设计
- MyBatis XML配置
- Excel导出工具(Apache POI)
- Maven依赖配置

### 4️⃣ [前端设计](docs/04-前端设计.md)
- Vue 3组件架构
- Element Plus UI集成
- API接口封装(Axios)
- 5个核心组件设计
- Vite配置

### 5️⃣ [完整架构图](docs/05-完整架构图.md)
- 系统整体架构图
- 数据流转时序图
- 前端组件关系图
- 后端分层架构图
- 数据库ER图
- 混淆矩阵计算流程图

---

## 🚀 快速体验

### 查看HTML原型
直接在浏览器中打开:
```bash
cd classification-confusion-matrix-system/frontend
# 使用浏览器打开 confusion-matrix-demo.html
```

**原型功能**:
- 完整的筛选面板
- 模拟的16x16混淆矩阵
- 统计卡片(总样本数/正确数/准确率)
- 单元格点击查看详情
- 响应式颜色编码

---

## 🛠️ 技术栈

### 前端
- **框架**: Vue 3 (Composition API)
- **UI库**: Element Plus
- **HTTP客户端**: Axios
- **构建工具**: Vite

### 后端
- **框架**: Spring Boot 2.7+
- **ORM**: MyBatis
- **数据库**: MySQL 8.0
- **Excel导出**: Apache POI

### 开发工具
- **版本控制**: Git
- **接口文档**: Swagger/Knife4j (推荐)
- **API测试**: Postman

---

## 📊 混淆矩阵示例

```
一级分类: 服装  |  二级分类: 上衣

              预测0  预测1  预测2  ...  预测15  │ SUM   召回率
          ────────────────────────────────────┼─────────────
实际0        45🟢    3🟠     1🟠  ...    0⚪   │  50    90%
实际1         2🟠   38🟢     0⚪  ...    0⚪   │  40    95%
实际2         1🟠    0⚪    35🟢  ...    0⚪   │  38    92%
...         ...    ...    ...    ...   ...    │ ...    ...
实际15        0⚪    0⚪     1🟠  ...   28🟢   │  30    93%
          ────────────────────────────────────┼─────────────
SUM          52     45     42    ...   30     │ 500
精准率       86%    84%    83%   ...   93%    │ 总准确率: 92%
```

**图例**:
- 🟢 对角线(预测正确)
- 🟠 非对角线(预测错误)
- ⚪ 无数据

---

## 📐 核心概念解释

### 1. 混淆矩阵 (Confusion Matrix)
- **行**: 实际的真实标签(Actual Label)
- **列**: 模型预测的标签(Predicted Label)
- **单元格值**: 该组合出现的次数

### 2. 召回率 (Recall)
```
召回率 = 正确预测数 / 该类别实际总数

示例: 实际有100个"类别5",模型正确预测了80个
召回率 = 80 / 100 = 80%
```

**含义**: 模型对该类别的"识别能力"

### 3. 精准率 (Precision)
```
精准率 = 正确预测数 / 预测为该类别的总数

示例: 模型预测了120个"类别5",其中80个是对的
精准率 = 80 / 120 = 66.7%
```

**含义**: 模型预测该类别时的"准确程度"

### 4. 总准确率 (Accuracy)
```
总准确率 = 所有预测正确数 / 总样本数
```

---

## 🎨 系统截图(原型)

### 筛选面板
支持按**一级分类/二级分类/用例/场景/垂类/因子/因子值**筛选

### 统计卡片
- 总样本数
- 预测正确数
- 总准确率

### 混淆矩阵表格
- 16x16矩阵数据
- 每行SUM和召回率
- 每列SUM和精准率
- 颜色编码(绿色/橙色/灰色)

### 单元格详情
点击单元格查看该组合的详细记录列表

---

## 🔧 开发指南

### 数据库初始化
```sql
-- 1. 创建数据库
CREATE DATABASE confusion_matrix CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 2. 执行建表脚本
-- 参考: docs/02-数据库设计.md

-- 3. 插入测试数据
-- 参考: docs/02-数据库设计.md 第六节
```

### 后端开发
```bash
# 1. 创建Spring Boot项目
# 参考: docs/03-后端设计.md

# 2. 配置application.yml
# 修改数据库连接信息

# 3. 启动应用
mvn spring-boot:run
```

### 前端开发
```bash
# 1. 安装依赖
cd frontend
npm install

# 2. 启动开发服务器
npm run dev

# 3. 访问
http://localhost:3000
```

---

## 📈 性能优化建议

### 数据库层
- ✅ 创建组合索引(primary_category, expected_value, actual_value)
- ✅ 使用预聚合表(定时任务生成快照)
- ✅ 读写分离(主库写入,从库查询)

### 后端层
- ✅ Redis缓存热门查询结果
- ✅ 异步导出Excel(大数据量时)
- ✅ 数据库连接池优化

### 前端层
- ✅ 虚拟滚动(大表格场景)
- ✅ 组件懒加载
- ✅ CDN加速静态资源

---

## 🤝 贡献指南

欢迎提交Issue和Pull Request!

### 开发分支
- `main`: 生产环境
- `develop`: 开发环境
- `feature/*`: 功能分支

### 提交规范
```
feat: 新增XXX功能
fix: 修复XXX问题
docs: 更新文档
refactor: 重构XXX模块
test: 添加测试用例
```

---

## 📝 许可证

MIT License

---

## 📞 联系方式

如有问题,请提交Issue或联系开发团队。

---

## 🙏 致谢

感谢您使用本系统!

如果这个项目对您有帮助,欢迎Star⭐支持!
